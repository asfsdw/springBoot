<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basicLayout}">
  <th:block layout:fragment="css">
    <script src="/ckeditor/ckeditor.js"></script>
  </th:block>
  <script layout:fragment="script" th:inline="javascript">
    var token = $("meta[name='_csrf']").attr("content");
    var header = $("meta[name='_csrf_header']").attr("content");
    let email = "";

    $(function() {
      $(document).ajaxSend(function(e, xhr, options) {
        xhr.setRequestHeader(header, token);
      });
    });
  </script>

  <div layout:fragment="content" style="height:830px">
    <h2>글쓰기</h2>
    <form method="post" enctype="multipart/form-data">
      <table class="table table-bordered">
        <tr>
          <th>글쓴이</th>
          <td><input type="text" id="name" name="name" th:value="${session.sName}" readonly class="form-control"/></td>
        </tr>
        <tr>
          <th>글제목</th>
          <td><input type="text" name="title" class="form-control" /></td>
        </tr>
        <tr>
          <th>글내용</th>
          <td>
            <textarea id="ckeditor" name="content" rows="6" class="form-control"></textarea>
            <script>
              CKEDITOR.replace("ckeditor", {
                height: 460,
                filebrowserUploadMethod: "form",
                filebrowserUploadUrl: "/ckeditor/imageUpload",
                uploadUrl : "/ckeditor/imageUpload"
              });
            </script>
          </td>
        </tr>
        <tr>
          <th>공개여부</th>
          <td class="text-start">
            <input type="radio" id="openSW1" name="openSW" value="OK" checked /> 공개 &nbsp;
            <input type="radio" id="openSW2" name="openSW" value="NO" /> 비공개
          </td>
        </tr>
      </table>
      <input type="submit" value="글올리기" class="btn btn-success me-2"/>
      <input type="reset" value="다시입력" class="btn btn-warning me-2"/>
      <input type="button" value="돌아가기" onclick="location.href='boardList';" class="btn btn-info"/>
      <input type="hidden" name="_csrf" th:value="${_csrf?.token}" />
    </form>
  </div>
</html>