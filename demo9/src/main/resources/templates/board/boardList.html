<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basicLayout}">
  <script layout:fragment="script" th:inline="javascript">
    'use strict';

    function pageSizeCheck() {
      let pag = [[${pag}]];
      let pageSize = $("#pageSize").val();

      location.href = "/board/boardList?pag="+pag+"&pageSize="+pageSize;
    }
  </script>
  <div layout:fragment="content">
    <h2>게시판 리스트</h2>
    <div class="row mt-2 mb-1">
      <div class="col text-start">
        <a th:href="@{/board/boardInput}" class="btn btn-success btn-sm">글쓰기</a>
      </div>
      <div class="col text-end">
        <select id="pageSize" name="pageSize" onchange="pageSizeCheck()">
          <option th:selected="${pageSize==5}">5</option>
          <option th:selected="${pageSize==10}">10</option>
          <option th:selected="${pageSize==15}">15</option>
          <option th:selected="${pageSize==20}">20</option>
          <option th:selected="${pageSize==25}">25</option>
          <option th:selected="${pageSize==50}">50</option>
        </select>
      </div>
    </div>
    <table class="table table-hover">
      <tr class="table-secondary">
        <th>번호</th>
        <th>글제목</th>
        <th>글쓴이</th>
        <th>글쓴날짜</th>
        <th>조회수(좋아요)</th>
      </tr>
      <th:block th:each="board, st : ${boardList}">
        <tr>
          <td th:text="${curScrStartNo - st.index}"></td>
          <td>[[${board.title}]]</td>
          <td>[[${board.name}]]</td>
          <td th:text="${#strings.substring(board.wDate,0,19)}"></td>
          <td>[[${board.readNum}]]</td>
        </tr>
      </th:block>
    </table>
    <!--블록페이지 시작-->
    <div class="text-center">
      <ul class="pagination justify-content-center">
        <th:block th:if="${pag > 0}"><li class="page-item"><a class="page-link text-secondary" th:href="@{boardList(pageSize=${pageSize},pag=0)}">첫페이지</a></li></th:block>
        <th:block th:if="${curBlock > 0}"><li class="page-item"><a class="page-link text-secondary" th:href="@{boardList(pageSize=${pageSize},pag=${(curBlock-1)*blockSize})}">이전블록</a></li></th:block>
        <th:block th:each="i: ${#numbers.sequence((curBlock*blockSize),(curBlock*blockSize)+blockSize-1)}">
          <th:block th:if="${i < totPage && i == pag}"><li class="page-item active"><a th:text="${i+1}" class="page-link bg-secondary border-secondary"></a></li></th:block>
          <th:block th:if="${i < totPage && i != pag}"><li class="page-item"><a th:href="@{boardList(pageSize=${pageSize},pag=${i})}" th:text="${i+1}" class="page-link text-secondary"></a></li></th:block>
        </th:block>
        <th:block th:if="${curBlock < lastBlock}"><li class="page-item"><a class="page-link text-secondary" th:href="@{boardList(pageSize=${pageSize},pag=${(curBlock+1)*blockSize})}">다음블록</a></li></th:block>
        <th:block th:if="${pag < totPage-1}"><li class="page-item"><a class="page-link text-secondary" th:href="@{boardList(pageSize=${pageSize},pag=${totPage-1})}">마지막페이지</a></li></th:block>
      </ul>
    </div>
    <!--블록페이지 끝-->
  </div>
</html>