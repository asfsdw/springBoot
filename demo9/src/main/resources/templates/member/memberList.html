<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basicLayout}">
<div layout:fragment="content">
  <h2>회원 목록</h2>
  <p></p>
  <table class="table table-hover">
    <tr class="table-secondary">
      <th>회원번호</th>
      <th>이메일</th>
      <th>이름</th>
      <th>주소</th>
      <th>등급</th>
    </tr>
    <th:block th:each="dto:${memberList}">
      <tr>
        <td>[[${dto.id}]]</td>
        <td>[[${dto.email}]]</td>
        <td>[[${dto.name}]]</td>
        <td>[[${dto.address}]]</td>
        <td th:if="${dto.role.name() == 'ADMIN'}">관리자</td>
        <td th:if="${dto.role.name() == 'USER'}">일반회원</td>
      </tr>
    </th:block>
  </table>
  <p></p>
  <!--블록페이지 시작-->
  <div class="text-center">
    <ul class="pagination justify-content-center">
      <th:block th:if="${pageDTO.pag > 0}"><li class="page-item"><a class="page-link text-secondary" th:href="@{memberList(pag=0, pageSize=${pageDTO.pageSize})}">첫페이지</a></li></th:block>
      <th:block th:if="${pageDTO.curBlock > 0}"><li class="page-item"><a class="page-link text-secondary" th:href="@{memberList(pag=${(pageDTO.curBlock-1)*pageDTO.blockSize}, pageSize=${pageDTO.pageSize})}">이전블록</a></li></th:block>
      <th:block th:each="i: ${#numbers.sequence((pageDTO.curBlock*pageDTO.blockSize),(pageDTO.curBlock*pageDTO.blockSize)+pageDTO.blockSize-1)}">
        <th:block th:if="${i < pageDTO.totPage && i == pageDTO.pag}"><li class="page-item active"><a th:text="${i+1}" class="page-link bg-secondary border-secondary"></a></li></th:block>
        <th:block th:if="${i < pageDTO.totPage && i != pageDTO.pag}"><li class="page-item"><a th:href="@{memberList(pag=${i}, pageSize=${pageDTO.pageSize})}" th:text="${i+1}" class="page-link text-secondary"></a></li></th:block>
      </th:block>
      <th:block th:if="${pageDTO.curBlock < pageDTO.lastBlock}"><li class="page-item"><a class="page-link text-secondary" th:href="@{memberList(pag=${(pageDTO.curBlock+1)*pageDTO.blockSize}, pageSize=${pageDTO.pageSize})}">다음블록</a></li></th:block>
      <th:block th:if="${pageDTO.pag < pageDTO.totPage-1}"><li class="page-item"><a class="page-link text-secondary" th:href="@{memberList(pag=${pageDTO.totPage-1}, pageSize=${pageDTO.pageSize})}">마지막페이지</a></li></th:block>
    </ul>
  </div>
  <!--블록페이지 끝-->
  <!-- 검색기 시작 -->
  <form class="d-flex justify-content-center">
    <div class="input-group" style="width:500px">
      <b class="input-group-text">검색</b>
      <select id="search" name="search" class="form-select" style="width:120px; flex:0 0 auto;">
        <option value="email" th:selected="${pageDTO.searchKr=='이메일'}">이메일</option>
        <option value="name" th:selected="${pageDTO.searchKr=='이름'}">이름</option>
      </select>
      <input type="text" id="searchStr" name="searchStr" th:value="${pageDTO.searchStr}" required />
      <input type="submit" value="검색" class="btn btn-secondary btn-sm mb" />
    </div>
  </form>
  <!-- 검색기 끝 -->
</div>
</html>