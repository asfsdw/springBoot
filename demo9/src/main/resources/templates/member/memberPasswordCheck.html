<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layouts/basicLayout}">
<script layout:fragment="script" th:inline="javascript">
  'use strict';

  function passwordCheck1() {
    let password = $("#password").val().trim();
    if(password == '') {
      alert("비밀번호를 입력해주세요.");
      $("#password").focus();
      return false;
    }

    passwordCheckForm.submit();
  }
  function passwordCheck2() {
    if($("#password1").val() != $("#password2").val()) {
      alert("입력하신 비밀번호가 서로 일치하지 않습니다.");
      return false;
    }

    passwordUpdateForm.action = "/member/memberPasswordUpdate";
    passwordUpdateForm.submit();
  }
</script>
<div layout:fragment="content">
  <th:block th:if="${flag == '1' || flag == '2'}">
    <h2>비밀번호 확인</h2>
    <p></p>
    <div class="d-flex justify-content-center">
      <form name="passwordCheckForm" method="post">
        <div class="input-group">
          <input type="password" id="password" name="password" placeholder="비밀번호를 입력해주세요." class="form-control" style="width:400px; flex:0 0 auto;"/>
          <input type="button" value="비밀번호확인" onclick="passwordCheck1()" class="btn btn-success" />
        </div>

        <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />
      </form>
    </div>
  </th:block>
  <th:block th:if="${flag == '3'}">
    <h2>비밀번호 변경</h2>
    <div class="d-flex justify-content-center">
      <form name="passwordUpdateForm" method="post">
        <div class="d-flex align-items-center">
          <div class="d-flex flex-column me-3">
            <input type="password" id="password1" name="password" placeholder="변경할 비밀번호를 입력해주세요." class="form-control mb-2" style="width: 400px;">
            <input type="password" id="password2" placeholder="비밀번호를 다시 한 번 입력해주세요." class="form-control" style="width: 400px;">
          </div>
          <div>
            <input type="button" value="비밀번호확인" onclick="passwordCheck2()" class="btn btn-success">
          </div>
        </div>

        <input type="hidden" th:name="${_csrf?.parameterName}" th:value="${_csrf?.token}" />
      </form>
    </div>
  </th:block>
</div>
</html>